<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<title>商品列表</title>
		<link rel="stylesheet" href="/web/resources/css/back.css" />
		<script src="/web/resources/js/jquery-1.11.3.min.js" type="text/javascript"></script>
		<script type="text/javascript" src="/web/resources/js/jquery-heima-0.0.1.js" ></script>
		<script type="text/javascript" src="/web/resources/js/vue.js"></script>
		<style type="text/css">
			.cate_tr{
				text-align: center;
			}
			.cate_tr:hover{
				background-color: white;
			}

		</style>
		<script type="text/javascript">
			$(function(){
				var vueCategory = new Vue({
					el: "#cate_list",
					data: {
						categoryList:[]
					},
					methods: {
						// 初始化函数
						initCategoryList(){
							HM.ajax("/admin","method=findAllCategory",function (data,state,xhr){
								if(data.code == 1){
									vueCategory.categoryList = data.obj;
								}else{
									console.log(data.message);
								}
							})
						},
						// 删除函数
						deleteCategoryById(cid){
							console.log(cid);
							if(confirm("确定要删除这个商品分类吗?")){
								HM.ajax("/admin","method=deleteCategoryByCid&cid="+cid,function(data,state,xhr){
									if(data.code == 1){
										console.log(data.message);
			    					location.href = "/web/view/admin/category/list.html";
									}else{
										console.log(data);
										alert(data.message);
									}
								})
							}
						},
						verifyIsLogin(){
							HM.ajax("/admin","method=isLogin",function (data,state,xhr){
								if(data.code == 1){
									vueCategory.initCategoryList();
									cnosole.log(data.message)
								}else{
									console.log(data);
									$("body").html("未登录");
								}
							})
						},
					},
					mounted:function(){ // 生命周期函数
						// 初始化数据
						this.verifyIsLogin();
					}
				});
			});
		</script>
	</head>
	<body>
		<table cellSpacing="1" cellPadding="0" width="100%" align="center" bgColor="#f5fafe" border="0">
			<tbody>
				<tr>
					<td  align="center" bgColor="#afd1f3">
						<strong>分类列表</strong>
					</td>
				</tr>
				<tr>
					<td  align="right">
							<a href="add.html" target="mainFrame">添加</a>
					</td>
				</tr>
				<tr>
					<td>
						<table id="cate_list" cellspacing="0"   bordercolor="gray" border="1" style="width:100%;BORDER-COLLAPSE:collapse;">
							 <tr style="FONT-WEIGHT: bold; FONT-SIZE: 12pt; HEIGHT: 25px; BACKGROUND-COLOR: #afd1f3;text-align: center;">
								<td width="18%">
									序号
								</td>
								<td width="47%">
									分类名称
								</td>
								<td width="7%" >
									操作
								</td>

							 </tr>

							<template v-for="(category,index) in categoryList">
								<tr :class="{'cate_tr tr_odd':index%2!=0,'cate_tr tr_even':index%2==0}">
									<td>
										{{category.cid}}
									</td>
									<td>
										{{category.cname}}
									</td>
									<td >
										<a :href="'/web/view/admin/category/edit.html?cid='+category.cid" class="a_button_edit"></a>
										&nbsp;&nbsp;
										<a @click="deleteCategoryById(category.cid)" class="a_button_del"></a>
									</td>
								</tr>
							</template>


							<!-- <tr class="cate_tr tr_even" >
								<td>
									2
								</td>
								<td>
									电脑办公
								</td>
								<td>
									<a href="/web/view/admin/category/edit.html" class="a_button_edit"></a>
									&nbsp;&nbsp;
									<a href="#" onclick="return confirm('您确定要删除吗？')" class="a_button_del"></a>
								</td>
							</tr>
							<tr class="cate_tr tr_odd" >
								<td>
									3
								</td>
								<td>
									母婴用品
								</td>
								<td>
									<a href="/web/view/admin/category/edit.html" class="a_button_edit"></a>
									&nbsp;&nbsp;
									<a href="#" onclick="return confirm('您确定要删除吗？')" class="a_button_del"></a>
								</td>
							</tr> -->

						</table>
					</td>
				</tr>
			</tbody>
		</table>
	</body>
</html>
