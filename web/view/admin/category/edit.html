<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>编辑页面</title>
		<link rel="stylesheet" href="/web/resources/css/back.css" />
		<script src="/web/resources/js/jquery-1.11.3.min.js" type="text/javascript"></script>
		<script type="text/javascript" src="/web/resources/js/jquery-heima-0.0.1.js" ></script>
		<script type="text/javascript" src="/web/resources/js/vue.js"></script>
	   <script type="text/javascript">
			$(function(){
			    var editCategoryVue = new Vue({
			        el:'#editForm',
			        data:{
			            cname:"demo",
			        },
			        methods:{
			            initData(){
			                // 获取分类ID
											var cid = HM.getParameter("cid");
											console.log(cid);
											HM.ajax("/admin","method=getCategoryByCid&cid="+cid,function(data,state,xhr){
												if(data.code == 1){
													editCategoryVue.cname = data.obj.cname;
												}else{
													console.log(data);
												}
											})
			            },
			            editCategory(){
											var cid = HM.getParameter("cid");
											var cname = $("#cname").val();
											console.log(cid);
											console.log(cname);
											HM.ajax("/admin","method=updateCategoryByCid&cid="+cid+"&cname="+cname,function(data, state, xhr){
												 if(data.code == 1){
							    					location.href = "/web/view/admin/category/list.html";
												 }else{
													 console.log(data);
													 alert(data.message);
												 }
											})
									}
			        },
			        mounted:function(){
			            this.initData();
			        },
			    });
			});
	   </script>
	</head>
	<body>
		<form  method="post" id="editForm">
			<table cellSpacing="1" cellPadding="5" width="100%" align="center" bgColor="#eeeeee" style="border: 1px solid #8ba7e3" border="0">
				<tr>
					<td class="ta_01" align="center" bgColor="#afd1f3" colSpan="4"
						height="26">
						<STRONG>编辑分类</STRONG>

					</td>
				</tr>

				<tr>
					<td width="18%" align="center" bgColor="#f5fafe" class="ta_01">
						分类名称：
					</td>
					<td class="ta_01" bgColor="#ffffff" colspan="3">
						<input type="text" name="cname" id="cname" v-model="cname" class="bg"/>
						</td>
				</tr>

			    <tr>
					<td align="center" bgColor="#f5fafe" colSpan="4">
						<input type="button" value="保存" id="save" @click="editCategory()" />
						<input type="reset" value="重置" />
						<input type="button" onclick="history.go(-1)" value="返回" />
					</td>
				</tr>
			</table>
		</form>
	</body>
</html>
